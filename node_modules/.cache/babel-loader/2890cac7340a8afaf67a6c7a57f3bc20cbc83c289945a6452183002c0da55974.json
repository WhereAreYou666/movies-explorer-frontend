{"ast":null,"code":"import React from'react';import'./Profile.css';import{CurrentUserContext}from'../../contexts/CurrentUserContext.js';import Header from'../Header/Header';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(props){const currentUser=React.useContext(CurrentUserContext);const[isDisabled,setIsDisabled]=React.useState(false);const[valueName,setValueName]=React.useState('');const[valueEmail,setValueEmail]=React.useState('');const[titleForm,setTitleForm]=React.useState('');const[isSubmitButton,setIsSubmitButton]=React.useState(false);const[isErrorSubmit,setIsErrorSubmit]=React.useState(false);const[isSuccessSubmit,setIsSucessSubmit]=React.useState(false);function signOut(){props.onLogoutProfile();}React.useEffect(()=>{if(props.loggedIn){setValueName(currentUser.name);setValueEmail(currentUser.email);setTitleForm(currentUser.name);}},[currentUser,props.loggedIn]);function clickOnEditButton(){if(!isDisabled){setIsDisabled(true);setIsSubmitButton(true);setIsSucessSubmit(false);}if(valueName===currentUser.name||valueEmail===currentUser.email){setIsErrorSubmit(true);}}function clickOnSubmitButton(){if(!isDisabled){setIsSucessSubmit(false);}else{setIsSucessSubmit(true);}}React.useEffect(()=>{if(valueName===currentUser.name&&valueEmail===currentUser.email){setIsErrorSubmit(true);}else{setIsErrorSubmit(false);}},[currentUser.name,currentUser.email,valueEmail,valueName]);function handleChangeName(evt){setValueName(evt.target.value);setIsErrorSubmit(false);}function handleChangeEmail(evt){setValueEmail(evt.target.value);setIsErrorSubmit(false);}function handleSubmitForm(evt){evt.preventDefault();setTitleForm(valueName);props.onUpdateUser({name:valueName,email:valueEmail});}React.useEffect(()=>{if(props.errorProfile){setIsSubmitButton(true);setIsDisabled(true);setValueName(currentUser.name);setValueEmail(currentUser.email);setTitleForm(currentUser.name);setIsErrorSubmit(true);setIsSucessSubmit(false);}else{setIsDisabled(false);setIsSubmitButton(false);}},[currentUser,props.errorProfile]);return/*#__PURE__*/_jsxs(\"main\",{className:\"profile\",children:[/*#__PURE__*/_jsx(Header,{loggedIn:props.loggedIn}),/*#__PURE__*/_jsxs(\"form\",{className:\"profile__form\",name:\"profileForm\",onSubmit:handleSubmitForm,children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"profile__form-title\",children:[\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \",titleForm,\"!\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"profile__form-rows\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"profile__form-row\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"profile-input-name\",className:\"profile__form-label\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"profileInputName\",className:\"profile__form-input \".concat(isDisabled?'profile__form-input_type_active':''),id:\"profile-input-name\",value:valueName||\"\",onChange:handleChangeName,minLength:\"2\",maxLength:\"32\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F\",disabled:!isDisabled})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"profile__form-row\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"profile-input-email\",className:\"profile__form-label\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"profileInputEmail\",className:\"profile__form-input \".concat(isDisabled?'profile__form-input_type_active':''),id:\"profile-input-email\",value:valueEmail||\"\",onChange:handleChangeEmail,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0447\\u0442\\u0443\",disabled:!isDisabled})]})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"profile__form-buttons\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile__error-text \".concat(isErrorSubmit&&props.errorProfile?'profile__error-text_color_red':'',\" \").concat(isSuccessSubmit?'profile__error-text_color_green':''),children:isErrorSubmit&&props.errorProfile?'При обновлении произошла ошибка.':'Сохранение прошло успешно'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"profile__edit-button \".concat(isDisabled||props.errorProfile?'profile__edit-button_type_inactive':''),onClick:clickOnEditButton,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"profile__escape-button \".concat(isDisabled?'profile__escape-button_type_inactive':''),onClick:signOut,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"profile__submit-button \\n                \".concat(!isSubmitButton?'profile__submit-button_type_active':'',\"\\n                \").concat(isErrorSubmit?'profile__submit-button_type_error':''),onClick:clickOnSubmitButton,disabled:isErrorSubmit,children:props.isLoading?'Сохранение...':'Сохранить'})]})]})]});}export default Profile;","map":{"version":3,"names":["React","CurrentUserContext","Header","jsx","_jsx","jsxs","_jsxs","Profile","props","currentUser","useContext","isDisabled","setIsDisabled","useState","valueName","setValueName","valueEmail","setValueEmail","titleForm","setTitleForm","isSubmitButton","setIsSubmitButton","isErrorSubmit","setIsErrorSubmit","isSuccessSubmit","setIsSucessSubmit","signOut","onLogoutProfile","useEffect","loggedIn","name","email","clickOnEditButton","clickOnSubmitButton","handleChangeName","evt","target","value","handleChangeEmail","handleSubmitForm","preventDefault","onUpdateUser","errorProfile","className","children","onSubmit","htmlFor","type","concat","id","onChange","minLength","maxLength","placeholder","disabled","onClick","isLoading"],"sources":["/Users/ruslan/movies-explorer-frontend/src/components/Profile/Profile.jsx"],"sourcesContent":["import React from 'react';\nimport './Profile.css';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext.js';\n\nimport Header from '../Header/Header';\n\nfunction Profile(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [isDisabled, setIsDisabled] = React.useState(false);\n  const [valueName, setValueName] = React.useState('');\n  const [valueEmail, setValueEmail] = React.useState('');\n  const [titleForm, setTitleForm] = React.useState('');\n  const [isSubmitButton, setIsSubmitButton] = React.useState(false);\n  const [isErrorSubmit, setIsErrorSubmit] = React.useState(false);\n  const [isSuccessSubmit, setIsSucessSubmit] = React.useState(false);\n\n  function signOut() {\n    props.onLogoutProfile();\n  }\n\n  React.useEffect(() => {\n    if (props.loggedIn) {\n      setValueName(currentUser.name);\n      setValueEmail(currentUser.email);\n      setTitleForm(currentUser.name);\n    }\n  }, [currentUser, props.loggedIn]);\n\n  function clickOnEditButton() {\n    if (!isDisabled) {\n      setIsDisabled(true);\n      setIsSubmitButton(true);\n      setIsSucessSubmit(false);\n    }\n    if (valueName === currentUser.name || valueEmail === currentUser.email) {\n      setIsErrorSubmit(true);\n    }\n  }\n\n  function clickOnSubmitButton() {\n    if (!isDisabled) {\n      setIsSucessSubmit(false);\n    } else {\n      setIsSucessSubmit(true);\n    }\n  }\n\n  React.useEffect(() => {\n    if (valueName === currentUser.name && valueEmail === currentUser.email) {\n      setIsErrorSubmit(true);\n    } else {\n      setIsErrorSubmit(false);\n    }\n  }, [currentUser.name, currentUser.email, valueEmail, valueName])\n\n  function handleChangeName(evt) {\n    setValueName(evt.target.value);\n    setIsErrorSubmit(false);\n  }\n\n  function handleChangeEmail(evt) {\n    setValueEmail(evt.target.value);\n    setIsErrorSubmit(false);\n  }\n\n  function handleSubmitForm(evt) {\n    evt.preventDefault();\n    setTitleForm(valueName);\n\n    props.onUpdateUser({\n      name: valueName,\n      email: valueEmail,\n    })\n  }\n\n  React.useEffect(() => {\n    if (props.errorProfile) {\n      setIsSubmitButton(true);\n      setIsDisabled(true);\n      setValueName(currentUser.name);\n      setValueEmail(currentUser.email);\n      setTitleForm(currentUser.name);\n      setIsErrorSubmit(true);\n      setIsSucessSubmit(false);\n    } else {\n      setIsDisabled(false);\n      setIsSubmitButton(false);\n    }\n  }, [currentUser, props.errorProfile])\n\n\n  return (\n    <main className=\"profile\">\n      <Header loggedIn={props.loggedIn} />\n      <form className=\"profile__form\" name=\"profileForm\" onSubmit={handleSubmitForm}>\n        <h1 className=\"profile__form-title\">Привет, {titleForm}!</h1>\n        <ul className=\"profile__form-rows\">\n          <li className=\"profile__form-row\">\n            <label htmlFor=\"profile-input-name\" className=\"profile__form-label\">Имя</label>\n            <input\n              type=\"text\"\n              name=\"profileInputName\"\n              className={`profile__form-input ${isDisabled ? 'profile__form-input_type_active' : ''}`}\n              id=\"profile-input-name\"\n              value={valueName || \"\"}\n              onChange={handleChangeName}\n              minLength=\"2\"\n              maxLength=\"32\"\n              placeholder=\"Введите имя\"\n              disabled={!isDisabled}\n            />\n          </li>\n          <li className=\"profile__form-row\">\n            <label htmlFor=\"profile-input-email\" className=\"profile__form-label\">E-mail</label>\n            <input\n              type=\"email\"\n              name=\"profileInputEmail\"\n              className={`profile__form-input ${isDisabled ? 'profile__form-input_type_active' : ''}`}\n              id=\"profile-input-email\"\n              value={valueEmail || \"\"}\n              onChange={handleChangeEmail}\n              placeholder=\"Введите почту\"\n              disabled={!isDisabled}\n            />\n          </li>\n        </ul>\n        <ul className=\"profile__form-buttons\">\n          <span className={`profile__error-text ${isErrorSubmit && props.errorProfile ? 'profile__error-text_color_red' : ''} ${isSuccessSubmit ? 'profile__error-text_color_green' : ''}`}>{isErrorSubmit && props.errorProfile ? 'При обновлении произошла ошибка.' : 'Сохранение прошло успешно'}</span>\n          <button\n            type=\"button\"\n            className={`profile__edit-button ${isDisabled || props.errorProfile ? 'profile__edit-button_type_inactive' : ''}`}\n            onClick={clickOnEditButton}>\n            Редактировать\n          </button>\n          <button\n            type=\"button\"\n            className={`profile__escape-button ${isDisabled ? 'profile__escape-button_type_inactive' : ''}`}\n            onClick={signOut}>\n            Выйти из аккаунта\n          </button>\n          <button\n            type=\"submit\"\n            className={\n              `profile__submit-button \n                ${!isSubmitButton ? 'profile__submit-button_type_active' : ''}\n                ${isErrorSubmit ? 'profile__submit-button_type_error' : ''}`\n            }\n            onClick={clickOnSubmitButton}\n            disabled={isErrorSubmit}\n          >\n            {props.isLoading ? 'Сохранение...' : 'Сохранить'}\n          </button>\n        </ul>\n      </form>\n\n    </main>\n  )\n}\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}