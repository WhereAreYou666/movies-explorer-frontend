{"ast":null,"code":"import'./Auth.css';import React from'react';import{Link}from'react-router-dom';import{useFormWithValidation}from'../../utils/useForm';import logo from'../../images/logo.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Auth(props){const{values,handleChange,errors,isValid}=useFormWithValidation();const[errReg,setErrReg]=React.useState(false);const[errLogin,setErrLogin]=React.useState(false);function handleSubmit(evt){evt.preventDefault();if(props.isLogin){props.onSubmitAuth(values.password,values.email);}else{props.onSubmitRegister(values.password,values.email,values.name);}if(props.isBadRequest||props.isConflict){setErrReg(true);}else{setErrReg(false);}if(props.isBadRequestLogin||props.isUnathorized){setErrLogin(true);}else{setErrReg(true);}}const handleClickSubmit=React.useEffect(()=>{if(props.isBadRequest||props.isConflict){setErrReg(true);}else{setErrReg(false);}if(props.isBadRequestLogin||props.isUnathorized){setErrLogin(true);}else{setErrLogin(false);}},[props]);function handleChangeInput(evt){handleChange(evt);setErrLogin(false);setErrReg(false);}return/*#__PURE__*/_jsx(\"main\",{className:\"auth\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"auth__form\",name:\"authForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"auth__link-main\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\\u043D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443\",className:\"logo logo_type_auth\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"auth__title\",children:props.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-content\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"auth-input-name\",className:\"auth__form-label \".concat(props.isLogin?'auth__form-label_type_inactive':''),children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",className:\"auth__form-input \".concat(props.isLogin?'auth__form-input_type_inactive':''),id:\"auth-input-name\",placeholder:\"\\u0418\\u043C\\u044F\",minLength:\"2\",maxLength:\"32\",value:values.name||\"\",onChange:handleChangeInput,required:props.nameRequired}),/*#__PURE__*/_jsx(\"span\",{className:\"auth__form-error \".concat(props.isLogin?'auth__form-error_type_inactive':''),id:\"auth-input-name-error\",children:errors.name||\"\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"auth-input-email\",className:\"auth__form-label\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:\"auth__form-input\",id:\"auth-input-email\",placeholder:\"E-mail\",value:values.email||\"\",onChange:handleChangeInput,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"auth__form-error\",id:\"auth-input-email-error\",children:errors.email}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"auth-input-password\",className:\"auth__form-label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"auth__form-input \".concat(errors.password?'auth__form-input_type_error':''),id:\"auth-input-password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",minLength:\"6\",value:values.password||\"\",onChange:handleChangeInput,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"auth__form-error\",id:\"auth-input-password-error\",children:errors.password||\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth__content-button\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"auth__error-text \".concat(props.isUnathorized||props.isBadRequest||props.isBadRequestLogin||props.isConflict?'auth__error-text_type_active':''),children:props.isUnathorized&&props.isUnathorizedText||props.isConflict&&props.isConflictText||props.isBadRequest&&props.isBadRequestText||props.isBadRequestLogin&&props.isBadRequestLoginText||'error'}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"auth__submit-button \".concat(!isValid||errLogin||errReg?'auth__submit-button_type_inactive':''),onClick:handleClickSubmit,disabled:!isValid||errLogin||errReg,children:props.isLoading?'Подождите':props.buttonText}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth__place-login\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"auth__title-login\",children:props.text}),/*#__PURE__*/_jsx(Link,{to:props.link,className:\"auth__link-login\",children:props.linkText})]})]})]})});}export default Auth;","map":{"version":3,"names":["React","Link","useFormWithValidation","logo","jsx","_jsx","jsxs","_jsxs","Auth","props","values","handleChange","errors","isValid","errReg","setErrReg","useState","errLogin","setErrLogin","handleSubmit","evt","preventDefault","isLogin","onSubmitAuth","password","email","onSubmitRegister","name","isBadRequest","isConflict","isBadRequestLogin","isUnathorized","handleClickSubmit","useEffect","handleChangeInput","className","children","onSubmit","to","src","alt","title","htmlFor","concat","type","id","placeholder","minLength","maxLength","value","onChange","required","nameRequired","isUnathorizedText","isConflictText","isBadRequestText","isBadRequestLoginText","onClick","disabled","isLoading","buttonText","text","link","linkText"],"sources":["/Users/ruslan/movies-explorer-frontend/src/components/Authorization/Auth.jsx"],"sourcesContent":["import './Auth.css';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useFormWithValidation } from '../../utils/useForm';\n\nimport logo from '../../images/logo.svg';\n\nfunction Auth(props) {\n  const { values, handleChange, errors, isValid } = useFormWithValidation();\n  const [errReg, setErrReg] = React.useState(false);\n  const [errLogin, setErrLogin] = React.useState(false);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    if (props.isLogin) {\n      props.onSubmitAuth(values.password, values.email);\n    } else {\n      props.onSubmitRegister(values.password, values.email, values.name);\n    }\n\n    if (props.isBadRequest || props.isConflict) {\n      setErrReg(true);\n    } else {\n      setErrReg(false);\n    }\n\n    if (props.isBadRequestLogin || props.isUnathorized) {\n      setErrLogin(true);\n    } else {\n      setErrReg(true);\n    }\n  }\n\n  const handleClickSubmit = React.useEffect(() => {\n    if (props.isBadRequest || props.isConflict) {\n      setErrReg(true);\n    } else {\n      setErrReg(false);\n    }\n\n    if (props.isBadRequestLogin || props.isUnathorized) {\n      setErrLogin(true);\n    } else {\n      setErrLogin(false);\n    }\n  }, [props])\n\n  function handleChangeInput(evt) {\n    handleChange(evt);\n    setErrLogin(false);\n    setErrReg(false);\n  }\n\n  return (\n    <main className=\"auth\">\n      <form\n        className=\"auth__form\"\n        name=\"authForm\"\n        onSubmit={handleSubmit}\n      >\n        <Link to=\"/\" className=\"auth__link-main\">\n          <img src={logo} alt=\"на главную страницу\" className=\"logo logo_type_auth\" />\n        </Link>\n        <h1 className=\"auth__title\">{props.title}</h1>\n        <div className=\"auth__form-content\">\n          <label htmlFor=\"auth-input-name\" className={`auth__form-label ${props.isLogin ? 'auth__form-label_type_inactive' : ''}`}>Имя</label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            className={`auth__form-input ${props.isLogin ? 'auth__form-input_type_inactive' : ''}`}\n            id=\"auth-input-name\"\n            placeholder=\"Имя\"\n            minLength=\"2\"\n            maxLength=\"32\"\n            value={values.name || \"\"}\n            onChange={handleChangeInput}\n            required={props.nameRequired}\n          />\n          <span className={`auth__form-error ${props.isLogin ? 'auth__form-error_type_inactive' : ''}`} id=\"auth-input-name-error\">\n            {errors.name || \"\"}\n          </span>\n          <label htmlFor=\"auth-input-email\" className=\"auth__form-label\">E-mail</label>\n          <input\n            type=\"email\"\n            name=\"email\"\n            className=\"auth__form-input\"\n            id=\"auth-input-email\"\n            placeholder=\"E-mail\"\n            value={values.email || \"\"}\n            onChange={handleChangeInput}\n            required\n          />\n          <span className=\"auth__form-error\" id=\"auth-input-email-error\">\n            {errors.email}\n          </span>\n          <label htmlFor=\"auth-input-password\" className=\"auth__form-label\">Пароль</label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            className={`auth__form-input ${errors.password ? 'auth__form-input_type_error' : ''}`}\n            id=\"auth-input-password\"\n            placeholder=\"Пароль\"\n            minLength=\"6\"\n            value={values.password || \"\"}\n            onChange={handleChangeInput}\n            required\n          />\n          <span className=\"auth__form-error\" id=\"auth-input-password-error\">\n            {errors.password || \"\"}\n          </span>\n        </div>\n        <div className=\"auth__content-button\">\n          <span className={`auth__error-text ${(props.isUnathorized || props.isBadRequest || props.isBadRequestLogin || props.isConflict) ? 'auth__error-text_type_active' : ''}`}>\n            {(props.isUnathorized && props.isUnathorizedText) || (props.isConflict && props.isConflictText) || (props.isBadRequest && props.isBadRequestText) || (props.isBadRequestLogin && props.isBadRequestLoginText) || 'error'}\n          </span>\n          <button\n            type=\"submit\"\n            className={`auth__submit-button ${!isValid || errLogin || errReg ? 'auth__submit-button_type_inactive' : ''}`}\n            onClick={handleClickSubmit}\n            disabled={!isValid || errLogin || errReg}\n          >\n            {props.isLoading ? 'Подождите' : props.buttonText}\n          </button>\n          <div className=\"auth__place-login\">\n            <h3 className=\"auth__title-login\">{props.text}</h3>\n            <Link to={props.link} className=\"auth__link-login\">\n              {props.linkText}\n            </Link>\n          </div>\n        </div>\n      </form>\n    </main>\n  );\n}\n\nexport default Auth;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}